{% extends "base.html" %}

{% block title %} - Analysis {% endblock %}
{% set active_page = "analysis" %}

{% block content %}
	<div class="container" ng-controller="AnalysisController">
		<h2>Analysis</h2>
		<p>View plate results with calculated absorbance values (% control) and plate details. Table can be directly copied into Prism or Excel. Sigmoidal dose regression calculated from Numpy and Scipy libraries and is still in beta mode. The mean of absorbance values is plotted with the dose response curve. Since this is in beta mode, please double check curve and values via Prism.</p>

		{% set conc = q.calc_c_range() %}
		{% set parsed_vals = q.parse_vals() %}

		<div class="row">
			<div class="col-lg-4">
				<h3>Plate details</h3>
				<dl>
				  <dt>Plate name (Plate letter): </dt>
				  <dd>RAL Experiment H (A)</dd>

  				  <dt>Plate date: </dt>
				  <dd>05/06/2015</dd>

				</dl>

				<h3>Quadrant details: </h3>
				<span>
					<button class='btn btn-sm btn-primary'>1</button>
					<button class='btn btn-sm'>2</button>
					<button class='btn btn-sm'>3</button>
					<button class='btn btn-sm'>4</button>
				</span>

				<dl class="">
  				  <dt>Clone: </dt>
				  <dd>A153G+N155H ROD9 (1-5) purified on 05/25/1505</dd>

  				  <dt>Stock FFU (harvest date): </dt>
				  <dd>05/06/2015</dd>

				  <dt>Drug: </dt>
				  <dd>Raltegravir (RAL)</dd>

  				  <dt># of control rows: </dt>
				  <dd>1</dd>
				</dl>

			</div>

			<div class="col-lg-8">
				<h3>Absorbance values (% control) <small>for direct use in Prism</small></h3>
				<table class="table table-hover table-condensed">
					<thead>
						<tr>
							<th>[drug] (nM)</th>
							<th>y<sub>0</sub></th>
							<th>y<sub>1</sub></th>
						</tr>
					</thead>

					<tbody>
						{% for row in parsed_vals %}
							<tr>
								<td>{{ conc[loop.index - 1] }}</td>
								{% for y in row %}
									<td>{{ y }}</td>
								{% endfor %}
							</tr>
						{% endfor %}
					</tbody>
				</table>
			</div>
		</div>

		<h3>Dose response curve <small>beta | still in development</small></h3>
		<drc-chart></drc-chart>
	</div>

{% endblock %}
